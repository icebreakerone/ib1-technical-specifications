
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://specification.docs.ib1.org/permission-records/1.0/">
      
      
      
      
      <link rel="icon" href="../../assets/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.30">
    
    
      
        <title>Permission Records - Icebreaker One Specifications</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Permission Records - Icebreaker One Specifications" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://specification.docs.ib1.org/assets/images/social/permission-records/1.0.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://specification.docs.ib1.org/permission-records/1.0/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Permission Records - Icebreaker One Specifications" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://specification.docs.ib1.org/assets/images/social/permission-records/1.0.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="ib1-light" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#permission-records" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Icebreaker One Specifications" class="md-header__button md-logo" aria-label="Icebreaker One Specifications" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Icebreaker One Specifications
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Permission Records
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="ib1-light" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="ib1-dark" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/icebreakerone/ib1-technical-specifications" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Icebreaker One Specifications" class="md-nav__button md-logo" aria-label="Icebreaker One Specifications" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Icebreaker One Specifications
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/icebreakerone/ib1-technical-specifications" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Specifications
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#permission-record-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Permission Record properties
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#permission-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Permission Endpoint
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#permission-endpoint-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      Permission Endpoint discovery
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evidence-urls" class="md-nav__link">
    <span class="md-ellipsis">
      Evidence URLs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-request-and-response" class="md-nav__link">
    <span class="md-ellipsis">
      Example request and response
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="permission-records">Permission Records</h1>
<p>OAuth Issuers must provide an additional endpoint to fetch information about the underlying Permission granted by the end user. Permission Records and the <a href="#evidence-urls">Evidence URL</a> within it contain:</p>
<ul>
<li>Who provided the permission - e.g. a logged-in user</li>
<li>On whose behalf the permission is provided - e.g. the SME</li>
<li>When was the permission provided</li>
<li>How the permission was provided - e.g., the app version on such-and-such a device</li>
<li>Which data processor has the permission</li>
<li>For what purpose the specific permission record applies to</li>
<li>How the purpose was described to the user</li>
<li>How long the permission is valid for</li>
</ul>
<h2 id="permission-record-properties">Permission Record properties</h2>
<p>All specified fields except <code>permissionRevoked</code> MUST be included.</p>
<p>Date and time fields are ISO8601 dates with '<code>Z</code>' denoting UTC.</p>
<ul>
<li><code>oauthIssuer</code> - the URL of the OAuth Issuer</li>
<li><code>client</code> - the URL of the Application in the Directory</li>
<li><code>license</code> - the URL of the License under which data is accessed (the OAuth scope)</li>
<li><code>subject</code> - a human readable name of the end user, for example, the name of the account holder.</li>
<li><code>lastGranted</code> - when permission was last granted by the end user.</li>
<li><code>expires</code> - when the permission expires, and will need to be explicitly renewed by the end user.</li>
<li><code>evidence</code> - the <a href="#evidence-urls">Evidence URL</a> which may be used by the user to see details of how permission was granted.</li>
<li><code>revoked</code> - when permission was revoked by the end user. This field must not be present if the permission has not been revoked. To avoid issues with variations in server time between systems, the presence of a timestamp for this field should be taken to mean that permission has been revoked</li>
<li><code>dataAvailableFrom</code> - the earliest date for which historical data will be available through the API. The client may not infer anything from this date, for example, age of the end user's account or whether data is available. This is provider and data source dependent, and could be:<ul>
<li>The date when permission was first provided.</li>
<li>The date the end user's account was opened at the provider.</li>
<li>The date the end user first occupied the premises where a meter is installed.</li>
</ul>
</li>
<li><code>tokenIssuedAt</code> - when the token was issued. (Several refresh tokens will be issued during the lifetime of the permission.)</li>
<li><code>tokenExpires</code> - when the token will expire, which is no later than permissionExpires  </li>
</ul>
<p>This specification may be used with additional specifications which extend this API to provide structured data about the permission log and evidence that the user has authority to give that permission. This data is highly variable and dependent on the market, the type of end user, the data source, and the data provider. When a Trust Framework only uses this base specification, this information is only available in a human readable form as a web page at the Evidence URL.</p>
<h2 id="permission-endpoint">Permission Endpoint</h2>
<p>OAuth Issuers provide an endpoint to retrieve a Permission Record. A client makes a <code>POST</code> request with a refresh token in the <code>token</code> parameter to this URL, which returns a JSON formatted response with the Permission Record in the <code>permission</code> property.</p>
<p>Expired tokens can be used for at least 12 months after they expire or are revoked, so that applications can retrieve information about expired permissions.</p>
<p>Access tokens must not be accepted.</p>
<h2 id="permission-endpoint-discovery">Permission Endpoint discovery</h2>
<p>A client discovers the URL of the Permission endpoint from the <code>ib1_permission_endpoint</code> field in the OAuth Issuer's Authorization Server Metadata.</p>
<h2 id="evidence-urls">Evidence URLs</h2>
<p>Evidence URLs are URLs which contain an unguessable identifier and may be viewed by a web browser. These URLs:</p>
<ul>
<li>use https with a public CA</li>
<li>do not require any authentication (other than the unguessable identifier in the URL)</li>
<li>will present all the evidence, formatted as an HTML document capable of displaying in mobile portrait orientation with 320px width when the user clicks “show evidence”</li>
<li>is not expected to display the content of documents or other information provided by the user to identify themselves, just the form of evidence used</li>
<li>where data is provided by remote data collection from installed equipment (for example, energy Smart Meters), how the equipment ownership was established as well as what permission was given for data sharing</li>
<li>will contain information about all previous grants of permission and renewals for this end user for the data consumer this URL was generated for, not just for the current token.</li>
</ul>
<p>If an Evidence URL is included in the <code>evidence</code> property of the record, the provider asserts that they have obtained permission from the end user and hold all the necessary evidence.</p>
<h2 id="example-request-and-response">Example request and response</h2>
<pre><code>POST /issuer/permission
token=AvbmC1RbCDryaYSG2IxaOAQWmy6UWCN7OAfYCTBko

{
  &quot;permission&quot;: {
    &quot;oauthIssuer&quot;: &quot;https://api.example.com/issuer&quot;,
    &quot;client&quot;: &quot;https://directory.core.pilot.trust.ib1.org/member/28364528&quot;,
    &quot;license&quot;: &quot;https://registry.core.pilot.trust.ib1.org/scheme/electricity/license/energy-consumption-data/2024-12-05&quot;,
    &quot;subject&quot;: &quot;Joe Bloggs Manufacturing&quot;,
    &quot;lastGranted&quot;: &quot;2024-03-31T23:30Z&quot;,
    &quot;expires&quot;: &quot;2025-03-31T23:30Z&quot;,
    &quot;evidence&quot;: &quot;https://api.example.com/evidence/tkDMf6lkNl&quot;,
    &quot;revoked&quot;: &quot;2024-07-01T12:34Z&quot;,
    &quot;dataAvailableFrom&quot;: &quot;2021-07-12T00:00Z&quot;,
    &quot;tokenIssuedAt&quot;: &quot;2024-06-30T23:30Z&quot;,
    &quot;tokenExpires&quot;: &quot;2024-09-30T23:30Z&quot;
  }
}
</code></pre>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>